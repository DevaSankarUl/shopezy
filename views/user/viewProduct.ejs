<%- include('../layouts/header.ejs')  %> 
<%-include('../layouts/partials/user-header.ejs') %> 

        <link rel="stylesheet" href="/public/stylesheets/productView.css">
        <!-- Product section-->

        <div class="container mt-5 mb-5">
            <div class="row d-flex justify-content-center">
                <div class="col-md-10">
                    <div class="card">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="images p-3">
 <div class="text-center p-4 zoom-image" data-image="/multimages/<%= result[0].image1%>"><img id="main-image" src="/multimages/<%= result[0].image1%> " width="250" /> </div>
<div class="thumbnail text-center" style="height: 5rem;">
     <img onclick="change_image(this)" src="/multimages/<%= result[0].image1 %> "data-zoom-image="/multimages/" <%=result[0].image1 %> width="70"style="height: 5rem;margin-left: 1rem;">
    <img onclick="change_image(this)"src="/multimages/<%= result[0].image2 %> "data-zoom-image="/multimages/" <%=result[0].image2 %> width="70"style="height: 5rem;margin-left: 1rem;"> </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="product p-4">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="d-flex align-items-center"> <a href="/user_shop " i class="fa fa-long-arrow-left"></i>
                                            <span class="ml-1" >Back</a></span> </div> <i
                                            class="fa fa-shopping-cart text-muted"></i>
                                    </div>
                                        <h5 class="text-uppercase mt-4">
                                            <%= result[0].productName %>
                                        </h5>

                                        <div class="d-flex " style="height: 5rem;">
                                            <p class="small" style="font-size: 22px;">
                                                <%= result[0].category %>
                                            </p>
                                            <p class="small text-danger"
                                                style=" margin-top: 3rem; margin-left: -3.7rem;"><s>â‚¹<%=
                                                        result[0].actualPrice %> </s></p>
                                        </div>
                                        <div class="price d-flex flex-row align-items-center"> <span
                                                class="act-price">&#8377; <%= result[0].discountPrice %></span>
                                            <div class="ml-2"> </div>
                                        </div>
                                    </div>
                                    <p class="about">
                                        <%=result[0].description %>
                                    </p>

                                    <form action="/user_cart?id=<%= result[0]._id%> " method="post">
                                        <div class="cart mt-4 align-items-center"> <a button
                                                class="btn btn-danger text-uppercase mr-2 px-4" type="submit"
                                                href="/user_cart">Add to cart</a></button> <i
                                                class="fa fa-heart text-muted"></i> <i
                                                class="fa fa-share-alt text-muted"></i> </div>
                                    </form>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Related items section-->
        <!-- <section class="py-5 bg-light">
            <div class="container px-4 px-lg-5 mt-5">
                <h2 class="fw-bolder mb-4">Related products</h2>
                <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                    <div class="col mb-5">
                        <div class="card h-100"> -->
                            <!-- Product image-->
                            <!-- <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg"
                                alt="..." /> -->
                            <!-- Product details-->
                            <!-- <div class="card-body p-4">
                                <div class="text-center"> -->
                                    <!-- Product name-->
                                    <!-- <h5 class="fw-bolder">Fancy Product</h5> -->
                                    <!-- Product price-->
                                    <!-- $40.00 - $80.00 -->
                                <!-- </div>
                            </div> -->
                            <!-- Product actions-->
                            <!-- <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="#">View
                                        options</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-5">
                        <div class="card h-100"> -->
                            <!-- Sale badge-->
                            <!-- <div class="badge bg-dark text-white position-absolute" style="top: 0.5rem; right: 0.5rem">
                                Sale</div> -->
                            <!-- Product image-->
                            <!-- <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg"
                                alt="..." /> -->
                            <!-- Product details-->
                            <!-- <div class="card-body p-4">
                                <div class="text-center"> -->
                                    <!-- Product name-->
                                    <!-- <h5 class="fw-bolder">Special Item</h5> -->
                                    <!-- Product reviews-->
                                    <!-- <div class="d-flex justify-content-center small text-warning mb-2">
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                    </div> -->
                                    <!-- Product price-->
                                    <!-- <span class="text-muted text-decoration-line-through">$20.00</span>
                                    $18.00
                                </div>
                            </div> -->
                            <!-- Product actions-->
                            <!-- <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center">
                                    <a class="btn btn-outline-dark mt-auto" href="/cart"><button type="submit"> Add to
                                            cart </button></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-5">
                        <div class="card h-100"> -->
                            <!-- Sale badge-->
                            <!-- <div class="badge bg-dark text-white position-absolute" style="top: 0.5rem; right: 0.5rem">
                                Sale</div> -->
                            <!-- Product image-->
                            <!-- <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg"
                                alt="..." /> -->
                            <!-- Product details-->
                            <!-- <div class="card-body p-4">
                                <div class="text-center"> -->
                                    <!-- Product name-->
                                    <!-- <h5 class="fw-bolder">Sale Item</h5> -->
                                    <!-- Product price-->
                                    <!-- <span class="text-muted text-decoration-line-through">$50.00</span>
                                    $25.00
                                </div>
                            </div> -->
                            <!-- Product actions-->
                            <!-- <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="#">Add to
                                        cart</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="col mb-5">
                        <div class="card h-100"> -->
                            <!-- Product image-->
                            <!-- <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg"
                                alt="..." /> -->
                            <!-- Product details-->
                            <!-- <div class="card-body p-4">
                                <div class="text-center"> -->
                                    <!-- Product name-->
                                    <!-- <h5 class="fw-bolder">Popular Item</h5> -->
                                    <!-- Product reviews-->
                                    <!-- <div class="d-flex justify-content-center small text-warning mb-2">
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                        <div class="bi-star-fill"></div>
                                    </div> -->
                                    <!-- Product price-->
                                    <!-- $40.00 -->
                                <!-- </div>
                            </div> -->
                            <!-- Product actions-->
                            <!-- <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                                <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="#">Add to
                                        cart</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section> -->
        <script>
            function change_image(image) {

                var container = document.getElementById("main-image");

                container.src = image.src;
            }


            document.addEventListener("DOMContentLoaded", function (event) {


            });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/3.0.8/jquery.elevatezoom.min.js"></script>
        <!-- <script>
            $("#zoom").elevateZoom();
        </script>
        <script>
            $("#zoom1").elevateZoom();
        </script>
        <script>
            $("#zoom2").elevateZoom();
        </script> -->
<script>
        jQuery(document).ready(function ($) {

            $('.zoom-image img').click(function (event) {
                var ix = $(this).offset().left;
                var iy = $(this).offset().top;
                console.log(ix + '-' + iy);
    
                var mx = event.pageX;
                var my = event.pageY;
                console.log(mx + '-' + my);
            })
    
            $('.zoom-image img').hover(function () {
    
                var img = $(this).attr('src');
    
                $(this).after("<div class='hover-image' style='background-image: url(" + img + "); background-size: 300px;'></div>");
    
                $(this).mousemove(function (event) {
    
                    // Mouse Position
                    var mx = event.pageX;
                    var my = event.pageY;
    
                    // Image Position
                    var ix = $(this).offset().left;
                    var iy = $(this).offset().top;
    
                    // Mouse Position Relavtive to Image
                    var x = mx - (ix);
                    var y = my - (iy);
    
                    // Image Height and Width
                    var w = $(this).width();
                    var h = $(this).height();
    
                    // Mouse Position Relative to Image, in %
                    var xp = (-x / w) * -100;
                    var yp = (-y / h) * -100;
    
                    $(this).parent().find('.hover-image').attr('style',
    
                        "background-image: url(" + img + "); background-size: 1000px; background-repeat: no-repeat; background-position: " + xp + "% " + yp + "%; top: " + y + "px; left: " + x + "px;");
    
                });
    
            }, function () {
    
                $(this).parent().find('.hover-image').remove();
    
            });
    
        });
    
    </script>
    
    <style>
        .zoom-image-container {
      
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      
    }
    
    .zoom-image {
      
      position: relative;
      
    }
    
    .zoom-image img {
      
      cursor: zoom-in;
      
      
      /* box-shadow: 0 18px 5px -15px rgba( 0, 0, 0, .5 ); */
      
    }
    
    .hover-image {
      
      position: fixed;
      width: 300px;
      height: 300px;
      
      border-radius: 50%;
      
      transform: translate( -0%, -20% );
      
      pointer-events: none;
      
      box-shadow: 0 0 10px rgba( 0, 0, 0, .5 );
      
    }
    </style>
    
    